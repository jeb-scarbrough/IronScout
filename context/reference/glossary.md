# Glossary

Precise definitions to prevent semantic drift across IronScout documentation and code.

---

## Affiliate & Tracking Terms

### Advertiser ID
Network-specific identifier for the merchant/retailer within an affiliate network. Stored in `Source.affiliateAdvertiserId`.

Example: Impact assigns each merchant an advertiser ID like `abc123`.

### Program ID
Internal identifier for an affiliate program or partner relationship. Stored in `Source.affiliateProgramId`. Used when your setup requires a separate program identifier distinct from advertiser.

### Campaign ID
Identifier for a specific marketing campaign within an affiliate network. Used for attribution and reporting. Stored in `Source.affiliateCampaignId`.

### Canonical URL
The retailer's clean product URL without tracking parameters. Persisted in `Price.url`. Tracking URLs are generated at click time by wrapping this URL.

### Tracking URL
Affiliate-wrapped URL generated at click time from a canonical URL and tracking template. Never persisted. Generated by `buildTrackingUrl()`.

### Tracking Template
URL pattern with placeholders (`{PRODUCT_URL}`, `{ADVERTISER_ID}`, etc.) used to generate tracking URLs. Stored in `Source.affiliateTrackingTemplate`.

---

## Data Model Terms

### Source
Configuration record for an external data feed. Owns affiliate configuration, feed URL, polling interval, and network type. One Source = one feed.

### Retailer
Business entity that sells products. Has a website, tier, and optional dealer relationship. Referenced by `Price.retailerId`.

### DealerSku
A SKU from a dealer's feed. Part of the dealer pipeline. Has lifecycle fields (`lastSeenAt`, `missingCount`, `isActive`) that affiliate products do not have.

### Price
Append-only record of a product's price at a point in time. Contains canonical URL, price, stock status, and optional promo metadata.

### ParsedProduct
Ephemeral in-memory representation of a product extracted from a feed. Network-agnostic. Never persisted directly. Normalized and written to Price.

---

## Price & Promo Terms

### PriceType
Enum indicating pricing context: `REGULAR`, `SALE`, or `CLEARANCE`. Null if unknown. Never inferred - only set when feed explicitly provides it.

### Original Price
MSRP or "compare at" price when feed provides it. Stored in `Price.originalPrice`. Do not compute from discount percentage.

### Sale Window
`saleStartsAt` and `saleEndsAt` timestamps from feed. Informational only. Never enforced - feeds lie.

---

## Pipeline Terms

### Affiliate Ingestion Path
Data flow: Source (config) → Fetch → ParsedProduct (ephemeral) → Normalize → Price (persistent)

### Dealer Ingestion Path
Data flow: DealerFeed → Fetch → Parse → DealerSku → Match → CanonicalSku → PricingSnapshot

These are separate pipelines with different lifecycle semantics.

---

## Saved Items & Notifications (ADR-011)

### Saved Item
User-facing concept for "I care about this product." Maps to `WatchlistItem` table internally. A single save action creates tracking + notification rules with sensible defaults.

See ADR-011 for full details.

### WatchlistItem (Internal)
Database table that stores a saved item. Owns all notification preferences (`notificationsEnabled`, `priceDropEnabled`, `backInStockEnabled`, thresholds) and cooldown state (`lastPriceNotifiedAt`, `lastStockNotifiedAt`).

### Alert (Internal)
Database table that acts as a declarative rule marker. Indicates which notification rule types (`PRICE_DROP`, `BACK_IN_STOCK`) exist for a saved item. Does NOT store thresholds, target prices, or state—those live on WatchlistItem.

### Notification Rule
User-facing term for alert configurations. Examples: "Price Drop Alerts", "Back in Stock Alerts". Internally implemented via Alert records linked to WatchlistItem.

### SavedItemDTO
API response type for saved items. Contains core fields (product info, notification preferences) but NOT derived insights like "lowest price seen." Derived values come from price history queries and are tier-gated.
